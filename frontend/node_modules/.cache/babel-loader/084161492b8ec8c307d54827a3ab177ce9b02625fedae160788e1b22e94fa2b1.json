{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PRANSHU PATEL\\\\OneDrive\\\\Desktop\\\\Jobs-API\\\\frontend\\\\src\\\\context\\\\appContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport axios from 'axios';\nimport '../axios';\nimport React, { useContext, useEffect, useReducer } from 'react';\nimport { SET_LOADING, REGISTER_USER_SUCCESS, REGISTER_USER_ERROR, LOGOUT_USER, SET_USER, FETCH_JOBS_SUCCESS, FETCH_JOBS_ERROR, CREATE_JOB_SUCCESS, CREATE_JOB_ERROR, DELETE_JOB_ERROR, FETCH_SINGLE_JOB_SUCCESS, FETCH_SINGLE_JOB_ERROR, EDIT_JOB_SUCCESS, EDIT_JOB_ERROR } from './actions';\nimport reducer from './reducer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  user: null,\n  isLoading: false,\n  jobs: [],\n  showAlert: false,\n  editItem: null,\n  singleJobError: false,\n  editComplete: false\n};\nconst AppContext = /*#__PURE__*/React.createContext();\nconst AppProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const setLoading = () => {\n    dispatch({\n      type: SET_LOADING\n    });\n  };\n\n  // register\n  const register = async userInput => {\n    setLoading();\n    try {\n      const {\n        data\n      } = await axios.post(`/auth/register`, {\n        ...userInput\n      });\n      dispatch({\n        type: REGISTER_USER_SUCCESS,\n        payload: data.user.name\n      });\n      localStorage.setItem('user', JSON.stringify({\n        name: data.user.name,\n        token: data.token\n      }));\n    } catch (error) {\n      dispatch({\n        type: REGISTER_USER_ERROR\n      });\n    }\n  };\n\n  // login\n  const login = async userInput => {\n    setLoading();\n    try {\n      const {\n        data\n      } = await axios.post(`/auth/login`, {\n        ...userInput\n      });\n      dispatch({\n        type: REGISTER_USER_SUCCESS,\n        payload: data.user.name\n      });\n      localStorage.setItem('user', JSON.stringify({\n        name: data.user.name,\n        token: data.token\n      }));\n    } catch (error) {\n      dispatch({\n        type: REGISTER_USER_ERROR\n      });\n    }\n  };\n\n  // logout\n  const logout = () => {\n    localStorage.removeItem('user');\n    dispatch({\n      type: LOGOUT_USER\n    });\n  };\n\n  // fetch jobs\n  const fetchJobs = async () => {\n    setLoading();\n    try {\n      const {\n        data\n      } = await axios.get(`/jobs`);\n      dispatch({\n        type: FETCH_JOBS_SUCCESS,\n        payload: data.jobs\n      });\n    } catch (error) {\n      dispatch({\n        type: FETCH_JOBS_ERROR\n      });\n      logout();\n    }\n  };\n\n  // create job\n  const createJob = async userInput => {\n    setLoading();\n    try {\n      const {\n        data\n      } = await axios.post(`/jobs`, {\n        ...userInput\n      });\n      dispatch({\n        type: CREATE_JOB_SUCCESS,\n        payload: data.job\n      });\n    } catch (error) {\n      dispatch({\n        type: CREATE_JOB_ERROR\n      });\n    }\n  };\n  const deleteJob = async jobId => {\n    setLoading();\n    try {\n      await axios.delete(`/jobs/${jobId}`);\n      fetchJobs();\n    } catch (error) {\n      dispatch({\n        type: DELETE_JOB_ERROR\n      });\n    }\n  };\n  const fetchSingleJob = async jobId => {\n    setLoading();\n    try {\n      const {\n        data\n      } = await axios.get(`/jobs/${jobId}`);\n      dispatch({\n        type: FETCH_SINGLE_JOB_SUCCESS,\n        payload: data.job\n      });\n    } catch (error) {\n      dispatch({\n        type: FETCH_SINGLE_JOB_ERROR\n      });\n    }\n  };\n  const editJob = async (jobId, userInput) => {\n    setLoading();\n    try {\n      const {\n        data\n      } = await axios.patch(`/jobs/${jobId}`, {\n        ...userInput\n      });\n      dispatch({\n        type: EDIT_JOB_SUCCESS,\n        payload: data.job\n      });\n    } catch (error) {\n      dispatch({\n        type: EDIT_JOB_ERROR\n      });\n    }\n  };\n  useEffect(() => {\n    const user = localStorage.getItem('user');\n    if (user) {\n      const newUser = JSON.parse(user);\n      dispatch({\n        type: SET_USER,\n        payload: newUser.name\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      ...state,\n      setLoading,\n      register,\n      login,\n      logout,\n      fetchJobs,\n      createJob,\n      deleteJob,\n      fetchSingleJob,\n      editJob\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n};\n// make sure use\n_s(AppProvider, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n_c = AppProvider;\nexport const useGlobalContext = () => {\n  _s2();\n  return useContext(AppContext);\n};\n_s2(useGlobalContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport { AppProvider };\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["axios","React","useContext","useEffect","useReducer","SET_LOADING","REGISTER_USER_SUCCESS","REGISTER_USER_ERROR","LOGOUT_USER","SET_USER","FETCH_JOBS_SUCCESS","FETCH_JOBS_ERROR","CREATE_JOB_SUCCESS","CREATE_JOB_ERROR","DELETE_JOB_ERROR","FETCH_SINGLE_JOB_SUCCESS","FETCH_SINGLE_JOB_ERROR","EDIT_JOB_SUCCESS","EDIT_JOB_ERROR","reducer","jsxDEV","_jsxDEV","initialState","user","isLoading","jobs","showAlert","editItem","singleJobError","editComplete","AppContext","createContext","AppProvider","children","_s","state","dispatch","setLoading","type","register","userInput","data","post","payload","name","localStorage","setItem","JSON","stringify","token","error","login","logout","removeItem","fetchJobs","get","createJob","job","deleteJob","jobId","delete","fetchSingleJob","editJob","patch","getItem","newUser","parse","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useGlobalContext","_s2","$RefreshReg$"],"sources":["C:/Users/PRANSHU PATEL/OneDrive/Desktop/Jobs-API/frontend/src/context/appContext.js"],"sourcesContent":["import axios from 'axios'\nimport '../axios'\nimport React, { useContext, useEffect, useReducer } from 'react'\nimport {\n  SET_LOADING,\n  REGISTER_USER_SUCCESS,\n  REGISTER_USER_ERROR,\n  LOGOUT_USER,\n  SET_USER,\n  FETCH_JOBS_SUCCESS,\n  FETCH_JOBS_ERROR,\n  CREATE_JOB_SUCCESS,\n  CREATE_JOB_ERROR,\n  DELETE_JOB_ERROR,\n  FETCH_SINGLE_JOB_SUCCESS,\n  FETCH_SINGLE_JOB_ERROR,\n  EDIT_JOB_SUCCESS,\n  EDIT_JOB_ERROR,\n} from './actions'\nimport reducer from './reducer'\n\nconst initialState = {\n  user: null,\n  isLoading: false,\n  jobs: [],\n  showAlert: false,\n  editItem: null,\n  singleJobError: false,\n  editComplete: false,\n}\nconst AppContext = React.createContext()\n\nconst AppProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  const setLoading = () => {\n    dispatch({ type: SET_LOADING })\n  }\n\n  // register\n  const register = async (userInput) => {\n    setLoading()\n    try {\n      const { data } = await axios.post(`/auth/register`, {\n        ...userInput,\n      })\n\n      dispatch({ type: REGISTER_USER_SUCCESS, payload: data.user.name })\n      localStorage.setItem(\n        'user',\n        JSON.stringify({ name: data.user.name, token: data.token })\n      )\n    } catch (error) {\n      dispatch({ type: REGISTER_USER_ERROR })\n    }\n  }\n\n  // login\n  const login = async (userInput) => {\n    setLoading()\n    try {\n      const { data } = await axios.post(`/auth/login`, {\n        ...userInput,\n      })\n      dispatch({ type: REGISTER_USER_SUCCESS, payload: data.user.name })\n      localStorage.setItem(\n        'user',\n        JSON.stringify({ name: data.user.name, token: data.token })\n      )\n    } catch (error) {\n      dispatch({ type: REGISTER_USER_ERROR })\n    }\n  }\n\n  // logout\n  const logout = () => {\n    localStorage.removeItem('user')\n    dispatch({ type: LOGOUT_USER })\n  }\n\n  // fetch jobs\n  const fetchJobs = async () => {\n    setLoading()\n    try {\n      const { data } = await axios.get(`/jobs`)\n      dispatch({ type: FETCH_JOBS_SUCCESS, payload: data.jobs })\n    } catch (error) {\n      dispatch({ type: FETCH_JOBS_ERROR })\n      logout()\n    }\n  }\n\n  // create job\n  const createJob = async (userInput) => {\n    setLoading()\n    try {\n      const { data } = await axios.post(`/jobs`, {\n        ...userInput,\n      })\n\n      dispatch({ type: CREATE_JOB_SUCCESS, payload: data.job })\n    } catch (error) {\n      dispatch({ type: CREATE_JOB_ERROR })\n    }\n  }\n  const deleteJob = async (jobId) => {\n    setLoading()\n    try {\n      await axios.delete(`/jobs/${jobId}`)\n\n      fetchJobs()\n    } catch (error) {\n      dispatch({ type: DELETE_JOB_ERROR })\n    }\n  }\n\n  const fetchSingleJob = async (jobId) => {\n    setLoading()\n    try {\n      const { data } = await axios.get(`/jobs/${jobId}`)\n      dispatch({ type: FETCH_SINGLE_JOB_SUCCESS, payload: data.job })\n    } catch (error) {\n      dispatch({ type: FETCH_SINGLE_JOB_ERROR })\n    }\n  }\n  const editJob = async (jobId, userInput) => {\n    setLoading()\n    try {\n      const { data } = await axios.patch(`/jobs/${jobId}`, {\n        ...userInput,\n      })\n      dispatch({ type: EDIT_JOB_SUCCESS, payload: data.job })\n    } catch (error) {\n      dispatch({ type: EDIT_JOB_ERROR })\n    }\n  }\n\n  useEffect(() => {\n    const user = localStorage.getItem('user')\n    if (user) {\n      const newUser = JSON.parse(user)\n      dispatch({ type: SET_USER, payload: newUser.name })\n    }\n  }, [])\n  return (\n    <AppContext.Provider\n      value={{\n        ...state,\n        setLoading,\n        register,\n        login,\n        logout,\n        fetchJobs,\n        createJob,\n        deleteJob,\n        fetchSingleJob,\n        editJob,\n      }}\n    >\n      {children}\n    </AppContext.Provider>\n  )\n}\n// make sure use\nexport const useGlobalContext = () => {\n  return useContext(AppContext)\n}\n\nexport { AppProvider }\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}